<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="/build/assets/css/main.css">
	<title>Things I Have Learnt - AJAX</title>
</head>
<body class="inside">
	<header class="header">
		<a href="https://github.com/SalahHamza/things-i-have-learnt#readme">
			<img class="gh_logo" src="/build/assets/images/GitHub-Mark-Light-120px-plus.png" alt="View in Github">
		</a>
	</header>
	<main class="main">
		<nav class="table-of-content">
			<h2>Contents</h2>
			<ul>
<li><a href="#ajax">AJAX</a><ul>
<li><a href="#things-to-know-before-diving-into-ajax">Things to know before diving into AJAX</a><ul>
<li><a href="#web-apis">Web APIs</a></li>
<li><a href="#same-origin-policy">Same Origin Policy</a></li>
<li><a href="#cors">CORS</a></li>
</ul>
</li>
<li><a href="#ajax-with-xhr">AJAX with XHR</a><ul>
<li><a href="#the-open-method">The &#39;open()&#39; method</a></li>
<li><a href="#the-send-method">The &#39;send()&#39; method</a></li>
<li><a href="#handling-success">Handling success</a></li>
<li><a href="#handling-errors">Handling errors</a></li>
<li><a href="#putting-it-all-together">Putting it all together</a></li>
<li><a href="#recap">Recap</a><ul>
<li><a href="#to-send-an-async-request">To Send An Async Request</a></li>
<li><a href="#to-use-the-response">To Use The Response</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ajax-with-jquery">AJAX with jQuery</a><ul>
<li><a href="#the-ajax-method">The &#39;ajax()&#39; method</a></li>
<li><a href="#making-an-ajax-call">Making an AJAX call</a></li>
<li><a href="#handling-success-1">Handling success</a></li>
<li><a href="#handling-errors-1">Handling errors</a></li>
<li><a href="#other-jquery-async-methods">Other jQuery async methods</a></li>
<li><a href="#wrap-up">Wrap up</a></li>
</ul>
</li>
<li><a href="#ajax-with-fetch">AJAX with Fetch</a><ul>
<li><a href="#browser-support-and-fallback">Browser support and fallback</a></li>
<li><a href="#making-a-fetch-request">Making a fetch request</a></li>
<li><a href="#handling-the-response">Handling the response</a><ul>
<li><a href="#handling-json-responses">Handling JSON Responses</a></li>
<li><a href="#handling-texthtml-responses">Handling Text/HTML Responses</a></li>
<li><a href="#handling-blob-responses">Handling Blob Responses</a></li>
<li><a href="#validating-the-response">validating the response</a></li>
</ul>
</li>
<li><a href="#handling-errors">Handling Errors</a></li>
</ul>
</li>
<li><a href="#resources-and-usefull-links">Resources and Usefull links</a></li>
<li><a href="#related">Related</a></li>
</ul>
</li>
</ul>

		</nav>
		<article>
			<nav aria-label="Breadcrumb" class="breadcrumb">
				<ul>
					<li class="breadcrumb-item"><a href="/">Home</a></li>
					<li class="breadcrumb-item">AJAX</li>
				</ul>
			</nav>
			<div class="main-content">
				<html><head></head><body><h1 id="ajax">AJAX</h1>
<p><strong>AJAX</strong> or <strong>Asynchronous Javascript and XML</strong> allows for content retrieval and display without reloading the web page. The concept is to send that the client sends the request and while waiting it can do other tasks but once the response returns we can do whatever we want with the it, well, according to the pre-set instructions that we set before dubbed <strong>callbacks</strong>.</p>
<h2 id="things-to-know-before-diving-into-ajax">Things to know before diving into AJAX</h2>
<h3 id="web-apis">Web APIs</h3>
<p><strong>API</strong> is an acronym for <strong>Application Programming Interface</strong>. We&apos;ll be using APIs to interact with various data sources.</p>
<p>Read more about <strong>web APIs</strong>:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Introduction">Introduction to web APIs</a>.</li>
<li><a href="https://medium.freecodecamp.org/what-is-an-api-in-english-please-b880a3214a82">What is an API? In English, please.</a></li>
</ul>
<h3 id="same-origin-policy">Same Origin Policy</h3>
<blockquote>
<p>The <strong>same-origin policy</strong> is a critical security mechanism that restricts how a document or script loaded from one origin can interact with a resource from another origin.</p>
</blockquote>
<p><strong>Note</strong>: Two pages have the same origin if the protocol, port (if one is specified), and host are the same for both pages.</p>
<p>Read more about <strong>same-origin policy</strong>:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">MDN - Same-origin policy</a></li>
<li><a href="https://searchsecurity.techtarget.com/definition/Same-Origin-Policy-SOP">TechTarget - Same Origin Policy (SOP)</a></li>
</ul>
<h3 id="cors">CORS</h3>
<blockquote>
<p>Cross-Origin Resource Sharing (CORS) is a mechanism that uses additional HTTP headers to tell a browser to let a web application running at one origin (domain) have permission to access selected resources from a server at a different origin. A web application makes a cross-origin HTTP request when it requests a resource that has a different origin (domain, protocol, or port) than its own origin.</p>
</blockquote>
<blockquote>
<p>The Cross-Origin Resource Sharing standard works by adding new <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers">HTTP headers</a> that allow servers to describe the set of origins that are permitted to read that information using a web browser.</p>
</blockquote>
<p>Read more about <strong>CORS</strong>:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">MDN - Cross-Origin Resource Sharing (CORS)</a></li>
<li><a href="https://www.codecademy.com/articles/what-is-cors">Code Academy - What is CORS?</a></li>
</ul>
<h2 id="ajax-with-xhr">AJAX with XHR</h2>
<p>An <code>XMLHttpRequest</code> object (commonly abbreviated as XHR or xhr) is provided by the javascript environment and is used to make AJAX requests. The &quot;issue&quot; with XHR is that you have to manually do a lot of the steps to get the request set up and finally sent off, so when the response comes back there are already instructions to handle the data.</p>
<p><strong>Note</strong>: The name XMLHttpRequest is historical and has no bearing on its functionality.</p>
<p>To create an <code>XMLHttpRequest</code> object, we use the <code>XMLHttpRequest</code> constructor function.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> asyncRequestObject = <span class="hljs-keyword">new</span> XMLHttpRequest();
</code></pre>
<h3 id="the-open-method">The &apos;open()&apos; method</h3>
<p>The XHR method <code>open()</code> initializes a newly-created request, or re-initializes an existing one. <code>open()</code> takes a number of parameters, but the most important are its first two: the HTTP method (<code>GET</code>, <code>POST</code>, ...) and URL to send the request to.</p>
<p><strong>Note</strong>: Calling this method for an already active request (one for which open() has already been called) is the equivalent of calling <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/abort"><code>abort()</code></a>.</p>
<p>If we want to asynchronously request the homepage from the popular high-res image site, Unsplash, we&apos;d use a <code>GET</code> request and provide the URL:</p>
<pre><code class="lang-javascript">asyncRequestObject.<span class="hljs-keyword">open</span>(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;https://unsplash.com&apos;</span>);
</code></pre>
<p>The XHR&apos;s <code>open()</code> method does not actually send the request. It sets the stage and gives the object the info it will need when the request is actually sent.</p>
<p>XHR can perform the operation synchronously by setting the 3rd parameter to <code>false</code>, but it is not recommeneded to do so.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> mySyncRequest = <span class="hljs-keyword">new</span> XMLHttpRequest();
myAsyncRequest.<span class="hljs-built_in">open</span>(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;https://udacity.com/&apos;</span>, <span class="hljs-keyword">false</span>);
</code></pre>
<h3 id="the-send-method">The &apos;send()&apos; method</h3>
<p>The XHR method <code>send()</code> sends the request to the server. If the request is asynchronous (which is the default), this method returns as soon as the request is sent and the result is delivered using events.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
xhr.<span class="hljs-built_in">open</span>(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;https://unsplash.com&apos;</span>);
xhr.send();
</code></pre>
<p>Running the above code will do nothing other than sending the request. To watch for our response we need to set some handlers for when the response succeeds and when an error occurs, and we do that through the <code>onload</code> and <code>onerror</code> properties.</p>
<h3 id="handling-success">Handling success</h3>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleSuccess</span> <span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// in the function, the `this` value is the XHR object</span>
  <span class="hljs-comment">// this.responseText holds the response from the server</span>

  <span class="hljs-built_in">console</span>.log( <span class="hljs-keyword">this</span>.responseText ); <span class="hljs-comment">// the HTML of https://unsplash.com/</span>
}

xhr.onload = handleSuccess;
</code></pre>
<p><strong>Note</strong>: Not setting the <code>onload</code>property will render the request useless.</p>
<h3 id="handling-errors">Handling errors</h3>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleError</span> <span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// in the function, the `this` value is the XHR object</span>
  <span class="hljs-built_in">console</span>.log( <span class="hljs-string">&apos;An error occurred &#x1F61E;&apos;</span> );
}

xhr.onerror = handleError;
</code></pre>
<p><strong>Note</strong>: If by any chance an error occurs and you haven&apos;t set the <code>&#xF2;nerror</code> property and handled errors, your code will fail silently.</p>
<h3 id="putting-it-all-together">Putting it all together</h3>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleSuccess</span> <span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">console</span>.log( <span class="hljs-keyword">this</span>.responseText );
  <span class="hljs-comment">// the HTML of https://unsplash.com/</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleError</span> <span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">console</span>.log( <span class="hljs-string">&apos;An error occurred \uD83D\uDE1E&apos;</span> );
}

<span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
xhr.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;https://unsplash.com&apos;</span>);
xhr.onload = handleSuccess;
xhr.onerror = handleError;
xhr.send();
</code></pre>
<p>If the data we are requesting is in JSON format we need to convert that JSON response (<code>this.responseText</code>) into a javascript object. That can be done with <code>JSON.parse();</code>, and our code should now look like this:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleSuccess</span> <span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">const</span> data = <span class="hljs-built_in">JSON</span>.parse( <span class="hljs-keyword">this</span>.responseText ); <span class="hljs-comment">// convert data from JSON to a JavaScript object</span>
  <span class="hljs-built_in">console</span>.log( data );
}

xhr.onload = handleSuccess;
</code></pre>
<p><code>XMLHttpRequest</code> object has other methods and properties that you can check in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest MDN documentation</a></p>
<h3 id="recap">Recap</h3>
<h4 id="to-send-an-async-request">To Send An Async Request</h4>
<ul>
<li>create an XHR object with the <code>XMLHttpRequest</code> constructor function</li>
<li>use the <code>.open()</code> method - set the HTTP method and the URL of the resource to be fetched</li>
<li>set the <code>.onload</code> property - set this to a function that will run upon a successful fetch</li>
<li>set the <code>.onerror</code> property - set this to a function that will run when an error occurs</li>
<li>use the <code>.send()</code> method - send the request</li>
</ul>
<h4 id="to-use-the-response">To Use The Response</h4>
<ul>
<li>use the <code>.responseText</code> property - holds the text of the async request&apos;s response</li>
<li>use the <code>JSON.parse()</code> method (when requesting JSON data) - converts the JSON data to a javascript object</li>
</ul>
<p><strong>Note</strong>: The <code>.responseText</code> property is accessible through the <code>this</code> keyword, so make sure to use function declaration when setting the <code>.onload</code> property.</p>
<h2 id="ajax-with-jquery">AJAX with jQuery</h2>
<p>jQuery is an incredibly popular JavaScript library that provides a lot of functionality right out of the box. What is important to us here is jQuery&apos;s <code>ajax()</code> method that really eases up the handling of asynchronous requests.</p>
<h3 id="the-ajax-method">The &apos;ajax()&apos; method</h3>
<p>You can use the <code>ajax()</code> method by either providing a <code>requestUrl</code> and a configuration object, just like so:</p>
<pre><code class="lang-javascript"><span class="hljs-variable">$.</span>ajax(requestUrl, settings);
</code></pre>
<p>or just the <code>settings</code> object, which is &quot;cleaner&quot;</p>
<pre><code class="lang-javascript"><span class="hljs-variable">$.</span>ajax(settings);
</code></pre>
<h3 id="making-an-ajax-call">Making an AJAX call</h3>
<p>Unlike XMLHttpRequest where we had to &quot;open&quot; the request, then &quot;send&quot; it, jQuery does all that for us. A simple AJAX call with jQuery&apos;s <code>ajax()</code> looks like this:</p>
<pre><code class="lang-javascript">$<span class="hljs-class">.ajax</span>(<span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">url</span>:<span class="hljs-value"> <span class="hljs-string">&apos;https://swapi.co/api/people/1/&apos;</span>
</span></span></span>});
</code></pre>
<p>We are not specifying the HTTP <code>GET</code> method here because it defaults to <code>GET</code>, but we can set the HTTP method througn the configuration object like so:</p>
<pre><code class="lang-javascript">$.ajax({
  url: &apos;&lt;url_to_post_data&gt;&apos;,
  <span class="hljs-keyword">method</span>: &apos;&lt;<span class="hljs-keyword">method</span>&gt;&apos;,
  // ...
});
</code></pre>
<p><strong>Note</strong>: There are other options that you can set in the jquery settings object, you can check that in <a href="http://api.jquery.com/jquery.ajax/">the offcial jQuery&apos;s ajax docs</a></p>
<h3 id="handling-success">Handling success</h3>
<p>There are two ways to handle the returned data when the request is successful. The first is by setting the <code>success</code> property on the settings object, and the second/cleaner way is by chaining the <code>.done()</code> method on to <code>.ajax()</code> which works like ES2015 promises.</p>
<pre><code class="lang-javascript">$.ajax({
  url: <span class="hljs-string">&apos;https://swapi.co/api/people/1/&apos;</span>
}).done(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> </span>{
  debugger; <span class="hljs-comment">// work with the returned response</span>
});
</code></pre>
<p><strong>Note</strong>: When the received data is in JSON format jQuery automatically converts it to javascript object, so there is no need to use <code>JSON.parse()</code> method!</p>
<h3 id="handling-errors">Handling errors</h3>
<p>Just like handling success, handling errors can be done in two ways, either by setting the <code>error</code> property on the settings object or by chaining the <code>.fail()</code> method to <code>.ajax()</code>, we&apos;ll be working with the latter.</p>
<pre><code class="lang-javascript">$.ajax({
  url: <span class="hljs-string">&apos;https://swapi.co/api/people/1/&apos;</span>
})
.done(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> </span>{
  debugger; <span class="hljs-comment">// work with the returned response</span>
})
.fail(<span class="hljs-comment">/* handling errors*/</span><span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(error)</span> </span>{
  <span class="hljs-comment">// Do something with error</span>
});
</code></pre>
<h3 id="other-jquery-async-methods">Other jQuery async methods</h3>
<p>jQuery comes with other async functions to make asynchronous calls that work as shortcuts to the <code>.ajax()</code> method:</p>
<ul>
<li><a href="http://api.jquery.com/jQuery.get/"><code>.get()</code></a></li>
<li><a href="http://api.jquery.com/jQuery.getJSON/"><code>.getJSON()</code></a></li>
<li><a href="http://api.jquery.com/jQuery.getScript/"><code>.getScript()</code></a></li>
<li><a href="http://api.jquery.com/jQuery.post/"><code>.post()</code></a></li>
<li><a href="http://api.jquery.com/load/"><code>.load()</code></a></li>
</ul>
<p><strong>Note</strong>: The jQuery website recommends using <code>.ajax()</code> method over these convenience methods.</p>
<h3 id="wrap-up">Wrap up</h3>
<p>Using jQuery&apos;s <code>ajax()</code> method to handle async requests can save us lots of setup, it</p>
<ul>
<li>creates a new XHR object each time it&apos;s called</li>
<li>sets all of the XHR properties and methods</li>
<li>sends the XHR request</li>
</ul>
<p>But this comes with a price, which is including the whole jQuery library and that is some expensive network call.</p>
<h2 id="ajax-with-fetch">AJAX with Fetch</h2>
<p>Fetch is a new API that was built to make requesting resources (primarily across a network) a whole lot easier. One thing that makes the new Fetch API a lot nicer than the old XHR way of doing things is that Fetch is promise-based!</p>
<h3 id="browser-support-and-fallback">Browser support and fallback</h3>
<p>Fetch API is fairly new, so it&apos;s not widely supported in older browser, that is why you need to check for <a href="http://caniuse.com/#feat=fetch">browser support of the fetch API</a>.</p>
<p>In case it&apos;s not supported in your targeted browsers make sure to use this <a href="https://github.com/github/fetch">fetch polyfill</a>.</p>
<h3 id="making-a-fetch-request">Making a fetch request</h3>
<p>A simple &apos;GET&apos; request using the Fetch API is as simple as so</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">fetch</span><span class="hljs-params">(<span class="hljs-string">&apos;https://swapi.co/api/people/1/&apos;</span>)</span></span>
</code></pre>
<p>Specifying HTTP method (<code>append</code>, <code>has</code>, <code>get</code>, <code>set</code>, or <code>delete</code>), headers, mode (<code>cors</code>, <code>no-cors</code>, or <code>same-origin</code>) and other settings is done through the configuration object that is passed to the <code>fetch()</code> method as second argument.</p>
<p>So, sending a request with the HTTP <code>POST</code> method and <code>Authorization</code> headers using the Fetch API would look like this:</p>
<pre><code class="lang-javascript">fetch(<span class="hljs-string">&apos;&lt;request_url&gt;&apos;</span>, {
  method: <span class="hljs-string">&apos;POST&apos;</span>,
  headers: {
    Authorization: <span class="hljs-string">&apos;&lt;some_auth_string&gt;&apos;</span>
  },
  //<span class="hljs-keyword">...</span>
});
</code></pre>
<p>Headers can also be set with a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers">Headers</a> object, like so:</p>
<pre><code class="lang-javascript">const reqHeaders = new Headers();
reqHeaders.append(<span class="hljs-string">&apos;Authorization&apos;</span>, <span class="hljs-string">&apos;&lt;some_auth_string&gt;&apos;</span>);

fetch(<span class="hljs-string">&apos;&lt;request_url&gt;&apos;</span>, {
  headers: reqHeaders,
  //<span class="hljs-keyword">...</span>
});
</code></pre>
<h3 id="handling-the-response">Handling the response</h3>
<p>Fetch is Promise-based. This means that when we fire of the Fetch request, it will automatically return a Promise that we can use to listen for the response. <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">Read more about javascript promises</a>.</p>
<p>Since <code>fetch()</code> method returns a Promise that resolves with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><code>Response</code> object</a>, then all we have to do is chain a <code>.then()</code> on that Promise.</p>
<pre><code class="lang-javascript">fetch(`&lt;request_url&gt;`, {
  // <span class="hljs-keyword">...</span>
}).then((response) =&gt; {
  debugger; // work with the returned <span class="hljs-string">&apos;response&apos;</span>
});
</code></pre>
<p>The <code>Response</code> object doesn&apos;t have the data, it only has information about the response itself (<code>type</code>, <code>url</code>, <code>status</code>, <code>headers</code>, <code>ok</code>, ...). To actually get the data, we need to get the &quot;body&quot; of the response.</p>
<h4 id="handling-json-responses">Handling JSON Responses</h4>
<p>If the data we are requesting is JSON, then we should call the <code>.json()</code> method of the <code>Response</code> object that returns a Promise that resolves with data as javascript object.</p>
<pre><code class="lang-javascript">fetch(`<span class="javascript">&lt;request_url&gt;</span>`, {
  <span class="hljs-regexp">//</span> ...
})
.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(response)</span> =&gt;</span> response.json())
.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(data)</span> =&gt;</span> {
  <span class="hljs-keyword">debugger</span>; <span class="hljs-regexp">//</span> work <span class="hljs-reserved">with</span> the returned JSON data
});
</code></pre>
<h4 id="handling-text-html-responses">Handling Text/HTML Responses</h4>
<p>If the response data is HTML or text, then we should call the <code>.text()</code> method.</p>
<pre><code class="lang-javascript">fetch(`<span class="javascript">&lt;request_url&gt;</span>`, {
  <span class="hljs-regexp">//</span> ...
})
.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(response)</span> =&gt;</span> response.text())
.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(data)</span> =&gt;</span> {
  <span class="hljs-keyword">debugger</span>; <span class="hljs-regexp">//</span> work <span class="hljs-reserved">with</span> the returned HTML string
});
</code></pre>
<h4 id="handling-blob-responses">Handling Blob Responses</h4>
<p>To load an image with fetch we use the <code>blob()</code> method that resolves with a <code>Blob</code>. A <a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob"><code>Blob</code></a> object represents a file-like object of immutable, raw data.</p>
<pre><code class="lang-javascript">fetch(<span class="hljs-string">&apos;&lt;path_or_url_to_img&gt;/cute_cat.jpg&apos;</span>)
.<span class="hljs-keyword">then</span>( response =&gt; response.blob())
.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(imageBlob)</span> =&gt;</span> {
  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;img&apos;</span>).src = URL.createObjectURL(imageBlob);
});
</code></pre>
<h4 id="validating-the-response">validating the response</h4>
<p>Make sure to validate the response, as in check if the response is valid (i.e. 2xx). You can do that by checking if the <code>response.ok</code> property is <code>true</code>.</p>
<pre><code class="lang-javascript"><span class="hljs-reserved">const</span> validateResponse = <span class="hljs-function"><span class="hljs-params">(response)</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (!response.ok) {
    <span class="hljs-keyword">throw</span> Error(response.statusText);
  }
  <span class="hljs-keyword">return</span> response;
}

fetch(`<span class="javascript">&lt;request_url&gt;</span>`, {
  <span class="hljs-regexp">//</span> ...
})
.<span class="hljs-keyword">then</span>(validateResponse)
.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(response)</span> =&gt;</span> response.json())
.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(data)</span> =&gt;</span> {
  <span class="hljs-keyword">debugger</span>; <span class="hljs-regexp">//</span> work <span class="hljs-reserved">with</span> the returned JSON data
});
</code></pre>
<h3 id="handling-errors">Handling Errors</h3>
<p>Since the <code>fetch()</code> returns a <code>Promise</code>, we can handle errors by chaining a <code>.catch()</code> method on the tail of the fetch chain.</p>
<pre><code class="lang-javascript">fetch(`<span class="javascript">&lt;request_url&gt;</span>`, {
  <span class="hljs-regexp">//</span> ...
})
.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(response)</span> =&gt;</span> {
  <span class="hljs-regexp">//</span> <span class="hljs-keyword">return</span> <span class="hljs-reserved">with</span> the appropriate method json(), text() <span class="hljs-keyword">or</span> blob()
})
.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(data)</span> =&gt;</span> {
  <span class="hljs-regexp">//</span> Do something <span class="hljs-reserved">with</span> the data
})
.<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">(err)</span> =&gt;</span> {
  <span class="hljs-regexp">//</span> Handle the error
});
</code></pre>
<h2 id="resources-and-usefull-links">Resources and Usefull links</h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest">MDN - Using XMLHttpRequest</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest MDN documentation</a></li>
<li><a href="http://api.jquery.com/category/ajax/">jQuery AJAX documentation</a></li>
<li><a href="https://fetch.spec.whatwg.org">Fetch Spec</a></li>
<li><a href="https://davidwalsh.name/fetch">Fetch API by David Walsh</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">MDN - Using Fetch</a></li>
<li><a href="https://developers.google.com/web/ilt/pwa/working-with-the-fetch-api">Google - PWA - Working with the fetch API</a></li>
</ul>
<h2 id="related">Related</h2>
<ul>
<li><a href="https://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints">Pause Your Code With Breakpoints</a></li>
<li><a href="https://developers.google.com/web/tools/chrome-devtools/javascript/reference">JavaScript Debugging Reference</a></li>
<li><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">MDN - Promise</a></li>
<li><a href="https://developers.google.com/web/fundamentals/primers/promises">JavaScript Promises: an Introduction</a></li>
<li><a href="https://scotch.io/tutorials/javascript-promises-for-dummies">JavaScript Promises for Dummies</a></li>
<li><a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-a-promise-27fc71e77261">Master the JavaScript Interview: What is a Promise?</a></li>
</ul>
</body></html>
			</div>
		</article>
	</main>
</body>
</html>